@import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Courier+Prime&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-bub-void text-bub-parchment font-serif antialiased;
    background-image: 
      radial-gradient(circle at 50% 50%, rgba(62, 50, 40, 0.1) 0%, transparent 50%),
      url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
    overflow-x: hidden;
  }
  
  /* Header navigation should never show list markers */
  .mast__nav ul,
  .mast__nav ol {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .mast__nav li {
    margin: 0;
    padding: 0;
  }
  
  /* ---- Reading room rules (all volume pages) ---- */

  .volume {
    max-width: 72ch; /* 60–75ch target */
  }

  .volume .text {
    max-width: 72ch;
    line-height: 1.7; /* library reading comfort */
    font-size: 1.02rem;
  }

  /* Paragraph rhythm: spacing, not stacked lines */
  .volume .text p {
    margin: 0 0 1.05rem 0;
    color: rgba(220, 214, 198, 0.84);
  }

  /* Slightly tighter last paragraph */
  .volume .text p:last-child {
    margin-bottom: 0;
  }

  /* Give sections a composed cadence */
  .volume .text section {
    margin: 0 0 1.4rem 0;
  }

  .volume .text section:last-child {
    margin-bottom: 0;
  }

  /* Keep headings restrained if you ever use them in MDX */
  .volume .text h2,
  .volume .text h3 {
    margin: 1.4rem 0 0.65rem;
    font-weight: 500;
    letter-spacing: 0.02em;
    color: rgba(220, 214, 198, 0.9);
  }

  /* ---- Index card quotes ---- */

  .index-cards {
    display: grid;
    gap: 0.9rem;
    margin: 1.2rem 0 1.4rem;
  }

  .card-quote {
    margin: 0;
    padding: 0.9rem 1rem;
    border: 1px solid rgba(176, 141, 85, 0.28);
    border-radius: 12px;
    background: rgba(15, 14, 13, 0.33);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.22);
  }

  .card-quote p {
    margin: 0;
    color: rgba(220, 214, 198, 0.86);
    letter-spacing: 0.01em;
  }

  /* Slightly “card-like” emphasis without modern UI vibes */
  .card-quote p::before,
  .card-quote p::after {
    content: "";
  }

  /* ---- Marginalia ---- */

  .marginal-note {
    margin: 1.3rem 0 1.6rem;
    padding: 0.75rem 0.9rem;
    border-left: 1px solid rgba(176, 141, 85, 0.28);
    background: rgba(15, 14, 13, 0.18);
    color: rgba(220, 214, 198, 0.68);
    font-size: 0.92rem;
  }

  /* Desktop: sit it in the margin */
  @media (min-width: 980px) {
    .marginal-note {
      max-width: 34ch;
      margin-left: auto;
      margin-right: -10ch; /* nudges into the “margin” without breaking layout */
    }
  }

  /* Motion: delayed reveal (dust settling), but respect reduced-motion */
  @media (prefers-reduced-motion: no-preference) {
    .marginal-note {
      opacity: 0;
      transform: translateY(-6px);
      animation: settle 1.1s ease-out forwards;
      animation-delay: 0.25s;
    }
  }

  @keyframes settle {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .catalog {
    margin-top: 2rem;
    padding-top: 1.1rem;
    border-top: 1px solid rgba(176, 141, 85, 0.22);
  }

  .catalog ul {
    margin: 0.6rem 0 0;
    padding-left: 1.1rem;
  }

  .catalog a {
    color: rgba(212, 175, 55, 0.9);
    text-decoration: none;
  }
  .catalog a:hover { text-decoration: underline; }

  .closing-line {
    margin-top: 2.2rem;
    color: rgba(220, 214, 198, 0.78);
  }

  /* ===============================
   INDEX — CLERICAL LEDGER STYLES
   =============================== */

  .index-head {
    margin-bottom: 1.5rem;
  }

  .index-sub {
    color: rgba(220,214,198,0.65);
  }

  /* Classification ledger */
  .classification-ledger ul {
    list-style: none;
    padding: 0;
    margin: 0 0 2rem;
    columns: 2;
    column-gap: 2rem;
  }

  .classification-ledger li {
    margin-bottom: 0.35rem;
  }

  .classification-ledger a {
    text-decoration: none;
    color: rgba(212,175,55,0.9);
  }

  .classification-ledger a:hover {
    text-decoration: underline;
  }

  /* Volume register */
  .volume-register ol {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .ledger-entry {
    margin-bottom: 1.4rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(176,141,85,0.2);
  }

  .ledger-title a {
    font-weight: 500;
    text-decoration: none;
    color: rgba(220,214,198,0.92);
  }

  .ledger-sub {
    color: rgba(220,214,198,0.72);
    margin-top: 0.2rem;
  }

  .ledger-filed,
  .ledger-related {
    font-size: 0.9rem;
    color: rgba(220,214,198,0.6);
    margin-top: 0.35rem;
  }

  .empty-ledger {
    color: rgba(220,214,198,0.6);
    font-style: italic;
  }

  /* Footnote */
  .index-footnote {
    margin-top: 2rem;
    font-size: 0.9rem;
    color: rgba(220,214,198,0.6);
  }

  /* Custom scrollbar for Webkit */
  ::-webkit-scrollbar {
    width: 8px;
  }
  ::-webkit-scrollbar-track {
    @apply bg-bub-void;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-bub-leather rounded-sm;
    border: 2px solid #0f0e0d;
  }
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-bub-brass;
  }

  ::selection {
    @apply bg-bub-brass text-bub-void;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}
